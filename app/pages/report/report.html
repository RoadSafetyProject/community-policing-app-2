<ion-header>
  <ion-navbar>
    <ion-title>
      <ion-icon menuToggle ios="ios-menu" md="md-menu"></ion-icon>
      Community Police Report
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <form (ngSubmit)="onSubmit()">
    <div *ngFor="let programStage of programStages;let i = index;">
      <ion-item *ngIf="programStage.dataElement.valueType == 'TEXT'">
        <ion-label floating>{{programStage.dataElement.name}}</ion-label>
        <ion-input type="text" name="{{programStage.dataElement.id}}"
                   [(ngModel)]="dataValues[programStage.dataElement.id]"></ion-input>
      </ion-item>
      <ion-card *ngIf="programStage.dataElement.valueType == 'FILE_RESOURCE'">
        <img *ngIf="base64Image[programStage.dataElement.id] && programStage.dataElement.name.indexOf('Image') > -1"
             [src]="base64Image[programStage.dataElement.id]"/>
        <img *ngIf="!base64Image[programStage.dataElement.id] && programStage.dataElement.name.indexOf('Image') > -1"
             src="build/img/home.png"/>
        <img *ngIf="base64Image[programStage.dataElement.id] && programStage.dataElement.name.indexOf('Video') > -1"
             [src]="base64Image[programStage.dataElement.id]"/>
        <img *ngIf="!base64Image[programStage.dataElement.id] && programStage.dataElement.name.indexOf('Video') > -1"
             src="build/img/home.png"/>
        <video *ngIf="!base64Image[programStage.dataElement.id] && programStage.dataElement.name.indexOf('Video') > -1" controls='controls'>";
          <source src='base64Image[programStage.dataElement.id]' type='video/mp4'>
        </video>
        <ion-card-content>
          <button block *ngIf="programStage.dataElement.name.indexOf('Image') > -1"
                  (click)="takeShot(programStage.dataElement)">Take A Photo</button>
          <button block *ngIf="programStage.dataElement.name.indexOf('Video') > -1"
                  (click)="takeShot(programStage.dataElement)">Record Video</button>
        </ion-card-content>
      </ion-card>
    </div>
    <button block>
      <ion-icon></ion-icon>
      Report
    </button>
  </form>
</ion-content>
